# Copyright 2017 Yahoo Holdings. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.

namespace=document

## Whether to enable compression in this process.
enablecompression bool default=false

## The Id of the documenttype. Must be unique among all document types.
documenttype[].id int

## Specify the name of the document type. Must be unique.
documenttype[].name string

## Version is not used
documenttype[].version int default=0

## Name of header struct defining document header.
documenttype[].headerstruct int

## Specify a document field id. Must be unique within the document type.
documenttype[].bodystruct int

## Specify a document type to inherit (id)
documenttype[].inherits[].id int

## This is the id of a datatype defined in the document.
documenttype[].datatype[].id int

## This is the type of the datatype.
documenttype[].datatype[].type enum {STRUCT, ARRAY, WSET, MAP, ANNOTATIONREF, PRIMITIVE, TENSOR}

## This is the id of the datatype of the element in the array.
documenttype[].datatype[].array.element.id int default=0

## This is the id of the datatype of the key in the map.
documenttype[].datatype[].map.key.id int default=0

## This is the id of the datatype of the value in the map.
documenttype[].datatype[].map.value.id int default=0

## This is the id of the datatype of the key in the wset.
documenttype[].datatype[].wset.key.id int default=0

## Should an update to a nonexistent element cause it to be created 
documenttype[].datatype[].wset.createifnonexistent bool default=false

## Should an element in a weighted set be removed if an update changes the weight to 0
documenttype[].datatype[].wset.removeifzero bool default=false

## This is the id of the referenced annotation.
documenttype[].datatype[].annotationref.annotation.id int default=0

## Specify the name of the struct type. Must be unique within documenttype.
documenttype[].datatype[].sstruct.name string default=""

## Version is not used
documenttype[].datatype[].sstruct.version int default=0

## Specify which compression to use if compression is enabled above (0 = NONE, 6 = LZ4)
documenttype[].datatype[].sstruct.compression.type enum {NONE, LZ4} default=NONE

## Specify the compression level to use if compression is enabled
documenttype[].datatype[].sstruct.compression.level int default=0

## Specify the minimum reduction required from compression in order to keep the compressed version (maximum percentage of original size)
documenttype[].datatype[].sstruct.compression.threshold int default=95

## Specify the minimum size before trying compression.
documenttype[].datatype[].sstruct.compression.minsize int default=200

## Specify a struct field name. Must be unique within the struct type.
documenttype[].datatype[].sstruct.field[].name string

## Specify a document field id. If not specified, this is generated by a hash function
documenttype[].datatype[].sstruct.field[].id int

## Specify the datatype of the field. Can only be a type defined in document
## or one of its inherited document types.
documenttype[].datatype[].sstruct.field[].datatype int

## Additional, optional type information which can be changed without
## (necessarily) causing field incompatibility
documenttype[].datatype[].sstruct.field[].detailedtype string default=""

## The id of the annotation type.
documenttype[].annotationtype[].id int

## The name of the annotation type.
documenttype[].annotationtype[].name string

## The contained datatype of the annotation type.
documenttype[].annotationtype[].datatype int default=-1

## The annotation type that this type inherits. (0 or 1 type)
documenttype[].annotationtype[].inherits[].id int

## Field sets
documenttype[].fieldsets{}.fields[] string

## ID of reference type. This is a regular data type, but is kept in its own
## array to avoid polluting the existing datatype array with a new default
## field value.
documenttype[].referencetype[].id int

## Numeric ID of the document type instances of the reference point to.
documenttype[].referencetype[].target_type_id int

## Imported fields (specified outside the document block in the schema)
documenttype[].importedfield[].name string
