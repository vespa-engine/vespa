# Copyright 2017 Yahoo Holdings. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.

namespace=document.config

## Whether to enable compression in this process.
enablecompression bool default=false

## The Id of the datatype. Must be unique, including not
## overlapping with the internal datatypes (defined in datatype.h)
datatype[].id int

## Use if this datatype is an array type, for instance an int
## or double array. Specifies the datatype we have an array of.
## This can be a built-in datatype or a new one created here, meaning
## that for instance arrays of arrays are allowed.
datatype[].arraytype[].datatype int

## Map type. Keys and values can be built in types or types created here.
datatype[].maptype[].keytype int
datatype[].maptype[].valtype int

## Use if this datatype is a weighted set type, for instance an int
## or double weighted set. Specifies the datatype we have a weighted set of.
## This can be a built-in datatype or a new one craeted here, meaning
## that for instance weighted sets of weighted sets are allowed.
datatype[].weightedsettype[].datatype int

## Should an update to a nonexistant element cause it to be created
datatype[].weightedsettype[].createifnonexistant bool default=false

## Should an element in a weighted set be removed if an update changes the weight to 0
datatype[].weightedsettype[].removeifzero bool default=false

## Specify the name of the document type. Must be unique.
datatype[].structtype[].name string

## Verison is not in use
datatype[].structtype[].version int default=0

## Specify which compression to use if compression is enabled above
datatype[].structtype[].compresstype enum { NONE, UNCOMPRESSABLE, LZ4 } default=NONE

## Specify the compression level to use if compression is enabled
datatype[].structtype[].compresslevel int default=0

## Specify the minimum reduction required from compression in order to keep the compressed version (maximum percentage of original size)
datatype[].structtype[].compressthreshold int default=95

## Specify the minimum size of the struct data before we even try to compress it
datatype[].structtype[].compressminsize int default=800

## Specify a document field name. Must be unique within the document type.
datatype[].structtype[].field[].name string

## Specify a document field id. If not specified, this is generated by a hash function
datatype[].structtype[].field[].id[].id int

## Specify the datatype of the field. Can be a built-in datatype or
## one specified in config.
datatype[].structtype[].field[].datatype int

## Additional, optional type information which can be changed without
## (necessarily) causing field incompatibility
datatype[].structtype[].field[].detailedtype string default=""

## Specify a document type to inherit
datatype[].structtype[].inherits[].name string

## Version is not in use
datatype[].structtype[].inherits[].version int default=0

## Specity an annotation reference type and the name of the annotation type it is referencing
datatype[].annotationreftype[].annotation string

## Specify the name of the document type. Must be unique.
datatype[].documenttype[].name string

## Version is not in use
datatype[].documenttype[].version int default=0

## Specify a document type to inherit
datatype[].documenttype[].inherits[].name string

## Version is not in use
datatype[].documenttype[].inherits[].version int default=0

## Name of header struct defining document header.
datatype[].documenttype[].headerstruct int

## Specify a document field id. Must be unique within the document type.
datatype[].documenttype[].bodystruct int

## Field sets
datatype[].documenttype[].fieldsets{}.fields[] string

## Imported fields (specified outside the document block in the schema)
datatype[].documenttype[].importedfield[].name string

## Cross-document reference with ID of target document type
datatype[].referencetype[].target_type_id int

## The Id of the annotation type. Must be unique.
annotationtype[].id int
annotationtype[].name string
annotationtype[].datatype int default=-1
annotationtype[].inherits[].id int
